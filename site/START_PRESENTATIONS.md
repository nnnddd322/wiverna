# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π - –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≤ Supabase
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `presentations` —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ Bucket `presentations` —Å–æ–∑–¥–∞–Ω (public)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥—Ä—É–ø–ø)
- ‚úÖ Storage policies –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ `.env` —Å–æ–∑–¥–∞–Ω –¥–ª—è frontend —Å `VITE_CONVERTER_URL`
- ‚úÖ `converter/.env` —Å–æ–∑–¥–∞–Ω —Å service role –∫–ª—é—á–æ–º
- ‚úÖ `docker-compose.yml` –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ `Dockerfile` —Å–æ–∑–¥–∞–Ω –¥–ª—è frontend

### 3. –ö–æ–¥ ‚úÖ
- ‚úÖ `presentationService` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `getPresentationUrl`)
- ‚úÖ `PresentationViewer` –≥–æ—Ç–æ–≤ —Å polling –∏ –≤—Å–µ–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- ‚úÖ `converter/index.js` –≥–æ—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º –ø–∞–π–ø–ª–∞–π–Ω–æ–º
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã: `processing | ready | error`

---

## üéØ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ c:\Users\nnndd\OneDrive\Desktop\v2.0
docker-compose up --build

# –ò–ª–∏ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d --build

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f

# –¢–æ–ª—å–∫–æ –ª–æ–≥–∏ converter
docker-compose logs -f converter
```

**–°–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:**
- Frontend: http://localhost:5173
- Converter: http://localhost:8787

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**Terminal 1 - Frontend:**
```bash
cd c:\Users\nnndd\OneDrive\Desktop\v2.0
npm install
npm run dev
```

**Terminal 2 - Converter:**
```bash
cd c:\Users\nnndd\OneDrive\Desktop\v2.0\converter
npm install
npm start
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å converter
```bash
curl http://localhost:8787/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "service": "presentation-converter",
  "timestamp": "2026-01-08T..."
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend
–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173 –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
–í Supabase Dashboard ‚Üí Table Editor:
- –¢–∞–±–ª–∏—Ü–∞ `presentations` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞
- –ü–æ–∫–∞ –ø—É—Å—Ç–∞—è - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

–í Supabase Dashboard ‚Üí Storage:
- Bucket `presentations` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω
- Public = true
- –ü–æ–∫–∞ –ø—É—Å—Ç–æ–π - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

---

## üéì –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –®–∞–≥ 1: –í–æ–π—Ç–∏ –∫–∞–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ teacher (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç teacher)

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é)
2. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è"
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä "–¢–µ—Å—Ç–æ–≤–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç—å PPTX
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é
2. –£–≤–∏–¥–∏—Ç–µ —ç–∫—Ä–∞–Ω "–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é"
3. –ù–∞–∂–º–∏—Ç–µ "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª PPTX"
4. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π .pptx —Ñ–∞–π–ª (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–π, 5-10 —Å–ª–∞–π–¥–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∞)
5. –£–≤–∏–¥–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∫–∞..." ‚Üí "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é"

### –®–∞–≥ 4: –î–æ–∂–¥–∞—Ç—å—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- –ß–µ—Ä–µ–∑ 10-60 —Å–µ–∫—É–Ω–¥ –ø–æ—è–≤—è—Ç—Å—è —Å–ª–∞–π–¥—ã
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ converter

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–∞–π–¥—ã
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞: ‚Üê ‚Üí Space Enter
- ‚úÖ –ó—É–º +/- —Ä–∞–±–æ—Ç–∞–µ—Ç (50%-200%)
- ‚úÖ Fullscreen —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–Ω–æ–ø–∫–∞ –∏–ª–∏ F11)
- ‚úÖ –°—á–µ—Ç—á–∏–∫ "3 / 20" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç
1. –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –∫–∞–∫ student
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç—É –∂–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É (–Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø!)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é
4. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ç–µ –∂–µ —Å–ª–∞–π–¥—ã
5. –ö–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ—Ç (—Ç–æ–ª—å–∫–æ –¥–ª—è teacher)

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: Converter –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```bash
docker-compose logs converter
```

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `Cannot find module 'express'` ‚Üí `cd converter && npm install`
- `LibreOffice not found` ‚Üí –≤ Docker —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- `Permission denied` ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å service_role key –≤ `converter/.env`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å converter
docker-compose build converter
docker-compose up converter
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–µ—Ä–≤–∏—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. Converter –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:8787/health`
2. Frontend –≤–∏–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `.env` ‚Üí `VITE_CONVERTER_URL=http://localhost:8787`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å frontend: `docker-compose restart frontend`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –∑–∞—Å—Ç—Ä—è–ª–∞ –≤ "processing"

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
docker-compose logs converter | grep "lecture"
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- Converter –Ω–µ –º–æ–∂–µ—Ç —Å–∫–∞—á–∞—Ç—å PPTX –∏–∑ Storage ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å bucket –∏ RLS
- –û—à–∏–±–∫–∞ LibreOffice ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å .pptx, –Ω–µ .ppt)
- –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–∞–π–¥–æ–≤ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Storage policies

**–†—É—á–Ω–∞—è –ø–µ—Ä–µ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:**
```sql
-- –í Supabase SQL Editor
UPDATE presentations 
SET status = 'processing', 
    error_message = NULL,
    slides_data = NULL
WHERE lecture_id = '<lecture-uuid>';
```

–ó–∞—Ç–µ–º:
```bash
curl -X POST http://localhost:8787/convert \
  -H "Content-Type: application/json" \
  -d '{"lectureId": "<lecture-uuid>"}'
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø:**
```sql
-- –í Supabase SQL Editor
SELECT * FROM discipline_access 
WHERE student_id = '<student-uuid>' 
   OR group_id = (SELECT group_id FROM profiles WHERE id = '<student-uuid>');
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–µ–∫—Ü–∏—è published:**
```sql
SELECT * FROM lectures WHERE id = '<lecture-uuid>';
-- status –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'published'
```

### –ü—Ä–æ–±–ª–µ–º–∞: TypeScript –æ—à–∏–±–∫–∏ –≤ IDE

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∏–ø—ã –ë–î –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –∏–∑ Supabase
npx supabase gen types typescript --project-id ygkuamwoxsqjdkxxkwuo > src/lib/database.types.ts
```

–ò–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å - –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, —ç—Ç–æ —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã –¥–ª—è IDE.

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
```sql
SELECT 
  p.id,
  l.title as lecture_title,
  p.status,
  p.error_message,
  p.slides_data->>'pageCount' as slide_count,
  p.created_at,
  p.updated_at
FROM presentations p
JOIN lectures l ON l.id = p.lecture_id
ORDER BY p.updated_at DESC;
```

### –ù–∞–π—Ç–∏ –∑–∞–≤–∏—Å—à–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
```sql
SELECT * FROM presentations
WHERE status = 'processing'
AND updated_at < NOW() - INTERVAL '10 minutes';
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä Storage
```sql
SELECT 
  COUNT(*) as file_count,
  pg_size_pretty(SUM((metadata->>'size')::bigint)) as total_size
FROM storage.objects
WHERE bucket_id = 'presentations';
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:

‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞  
‚úÖ Storage bucket —Å–æ–∑–¥–∞–Ω  
‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (—Å –≥—Ä—É–ø–ø–∞–º–∏)  
‚úÖ Converter –≥–æ—Ç–æ–≤ –∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏  
‚úÖ Frontend –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ converter  
‚úÖ –í—Å–µ .env —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã  
‚úÖ Docker Compose –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É  

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
```bash
docker-compose up --build
```

**–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** –í–æ–∑—å–º–∏—Ç–µ –ª—é–±–æ–π .pptx —Ñ–∞–π–ª (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–π –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ç–µ—Å—Ç–∞)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `PRESENTATIONS_SETUP_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `PRESENTATIONS_FIXES_SUMMARY.md` - —á—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- `converter/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è converter

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç –ø—É—Ç–µ–π –≤ Storage
```
<lectureId>/source.pptx
<lectureId>/slides/001.png
<lectureId>/slides/002.png
...
```

### –°—Ç–∞—Ç—É—Å—ã
- `processing` - –∏–¥–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- `ready` - —Å–ª–∞–π–¥—ã –≥–æ—Ç–æ–≤—ã
- `error` - –æ—à–∏–±–∫–∞ (—Å–º. error_message)

### –§–æ—Ä–º–∞—Ç slides_data
```json
{
  "pageCount": 20,
  "slides": [
    {
      "index": 1,
      "path": "<lectureId>/slides/001.png",
      "width": 1920,
      "height": 1080
    }
  ]
}
```

---

**–£–¥–∞—á–∏! –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ troubleshooting –≤—ã—à–µ.** üöÄ
