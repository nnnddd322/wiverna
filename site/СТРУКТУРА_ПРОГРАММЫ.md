# Полное описание структуры и работы программы

## Общая информация

**Название:** Образовательный портал EduPortal  
**Тип:** Веб-приложение для просмотра образовательных презентаций и лекций  
**Технологии:** HTML5, CSS3, JavaScript (Vanilla), TypeScript (для типов)

---

## Архитектура программы

### Структура файлов

```
proba/
├── index.html              # Главная HTML страница
├── app.js                  # Основная логика приложения
├── data.js                 # Данные о дисциплинах и презентациях
├── lectures.js             # Данные о лекциях
├── styles.css              # Стили приложения
├── pptx-export.js           # Экспорт презентаций в PowerPoint
├── disciplines.ts          # TypeScript интерфейсы
├── generate_lectures_from_txt.js  # Генератор лекций из текста
└── [вспомогательные файлы]
```

---

## Компоненты системы

### 1. **index.html** - Структура интерфейса

**Назначение:** Определяет структуру веб-страницы и все секции приложения.

**Основные секции:**
- **Навигация (navbar):** Верхняя панель с логотипом и меню
- **Главная страница (home):** Приветственный экран с описанием возможностей
- **Страница дисциплин (disciplines):** Список категорий дисциплин
- **Страница дисциплин категории (category-disciplines):** Список дисциплин в выбранной категории
- **Страница презентаций (presentations):** Список презентаций и лекций для выбранной дисциплины
- **Просмотрщик (viewer):** Полноэкранный просмотр презентаций/лекций
- **Страница тестов (tests):** Раздел тестирования (в разработке)

**Подключенные библиотеки:**
- Font Awesome 6.4.0 (иконки)
- Google Fonts (Inter)
- PptxGenJS 3.12.0 (экспорт в PowerPoint)

---

### 2. **app.js** - Основная логика приложения

**Назначение:** Управляет всей логикой работы приложения, навигацией и отображением контента.

#### Глобальные переменные:
```javascript
- currentCategory      // Текущая выбранная категория
- currentDiscipline    // Текущая выбранная дисциплина
- currentPresentation  // Текущая открытая презентация
- currentSlideIndex    // Индекс текущего слайда
- categories           // Массив категорий дисциплин
```

#### Основные функции:

**Навигация:**
- `showSection(sectionId)` - Переключение между секциями приложения
- `openCategory(categoryId)` - Открытие категории дисциплин
- `openDiscipline(disciplineId)` - Открытие дисциплины
- `openPresentation(presentationIndex)` - Открытие презентации для просмотра
- `openLecture(lectureId)` - Открытие лекции для просмотра

**Рендеринг:**
- `renderDisciplines()` - Отображение категорий дисциплин
- `renderPresentationsOnly()` - Отображение только презентаций
- `renderLecturesOnly()` - Отображение только лекций
- `renderSlides()` - Рендеринг слайдов презентации
- `renderThumbnails()` - Рендеринг миниатюр слайдов

**Создание слайдов:**
- `createSlideElement()` - Создание DOM-элемента слайда
- `createTitleSlide()` - Слайд с заголовком
- `createContentSlide()` - Контентный слайд
- `createTwoColumnSlide()` - Двухколоночный слайд
- `createComparisonSlide()` - Слайд сравнения
- `createHighlightSlide()` - Слайд с выделением
- `createQuoteSlide()` - Слайд с цитатой
- `createGridSlide()` - Слайд с сеткой элементов
- `createListSlide()` - Слайд со списком

**Навигация по слайдам:**
- `nextSlide()` - Следующий слайд
- `prevSlide()` - Предыдущий слайд
- `goToSlide(index)` - Переход к конкретному слайду
- `updateActiveSlide()` - Обновление активного слайда
- `updateSlideCounter()` - Обновление счетчика слайдов
- `updateActiveThumbnail()` - Обновление активной миниатюры

**Дополнительные функции:**
- `toggleFullscreen()` - Полноэкранный режим
- `setupKeyboardNavigation()` - Настройка клавиатурной навигации
- `setupScrollAnimations()` - Анимации при скролле
- `normalizeSlideText()` - Нормализация текста слайдов
- Обработка свайпов для мобильных устройств

**Типы слайдов:**
1. **title** - Заголовочный слайд (центрированный)
2. **content** - Обычный контентный слайд
3. **two-column** - Двухколоночный слайд
4. **comparison** - Слайд сравнения (две колонки с заголовками)
5. **highlight** - Слайд с выделенным текстом
6. **quote** - Слайд с цитатой
7. **grid** - Слайд с сеткой элементов
8. **list** - Слайд со списком элементов

---

### 3. **data.js** - Данные о дисциплинах и презентациях

**Назначение:** Содержит структурированные данные о всех дисциплинах и их презентациях.

**Структура данных:**
```javascript
var disciplines = [
  {
    id: 'pedagogy',                    // Уникальный идентификатор
    name: 'Общие основы педагогики',    // Название дисциплины
    description: 'Экзаменационные материалы',  // Описание
    hidden: false,                      // Скрыта ли дисциплина
    presentations: [                    // Массив презентаций
      {
        title: 'Тема 1. Педагогика как наука',
        hidden: false,
        slides: [                       // Массив слайдов
          {
            type: 'title',              // Тип слайда
            title: 'Тема 1',
            subtitle: 'Педагогика как наука'
          },
          // ... другие слайды
        ]
      }
    ]
  }
]
```

**Размер файла:** Очень большой (~18,000 строк), содержит множество дисциплин и презентаций.

---

### 4. **lectures.js** - Данные о лекциях

**Назначение:** Содержит текстовые лекции для каждой дисциплины.

**Структура данных:**
```javascript
var lecturesData = {
  "pedagogy": {
    id: "pedagogy",
    name: "Общие основы педагогики",
    description: "Экзаменационные материалы",
    lectures: [
      {
        id: "tema-1",
        title: "Тема 1. Педагогика как наука",
        content: "<pre>...</pre>"  // HTML-контент лекции
      }
    ]
  }
}
```

**Особенности:**
- Лекции хранятся в HTML-формате
- Каждая лекция привязана к дисциплине по ID
- Лекции могут быть сгенерированы автоматически из текстовых файлов

---

### 5. **styles.css** - Стили приложения

**Назначение:** Определяет внешний вид и анимации всех элементов интерфейса.

**Основные разделы:**

**CSS-переменные (Custom Properties):**
- Цветовая палитра (primary, secondary, accent, etc.)
- Градиенты для слайдов (8 вариантов)
- Тени и радиусы скругления
- Размеры и отступы

**Компоненты:**
- Навигация (navbar)
- Карточки (discipline-card, presentation-card)
- Слайды (различные типы с анимациями)
- Просмотрщик (viewer)
- Миниатюры слайдов
- Адаптивный дизайн для мобильных устройств

**Анимации:**
- Появление элементов (fadeIn, slideUp)
- Плавающие элементы (float)
- Пульсация (pulse)
- Переходы между слайдами

**Полноэкранный режим:**
- Специальные стили для полноэкранного просмотра
- Увеличенные размеры шрифтов
- Скрытие навигации

---

### 6. **pptx-export.js** - Экспорт в PowerPoint

**Назначение:** Позволяет экспортировать презентации в формат .pptx.

**Основные функции:**
- `exportToPPTX()` - Главная функция экспорта
- `performExport()` - Выполнение экспорта
- `addDecorativeElements()` - Добавление декоративных элементов
- Функции экспорта для каждого типа слайда:
  - `exportTitleSlide()`
  - `exportContentSlide()`
  - `exportTwoColumnSlide()`
  - `exportComparisonSlide()`
  - `exportHighlightSlide()`
  - `exportQuoteSlide()`
  - `exportGridSlide()`
  - `exportListSlide()`

**Особенности:**
- Использует библиотеку PptxGenJS
- Сохраняет градиенты и стили слайдов
- Ограничивает количество элементов на слайде для читаемости
- Нормализует текст перед экспортом

---

### 7. **generate_lectures_from_txt.js** - Генератор лекций

**Назначение:** Node.js скрипт для автоматической генерации лекций из текстового файла.

**Функциональность:**
- Чтение текстового файла (`etnopedagogika_clean_utf8.txt`)
- Парсинг текста и определение дисциплин
- Распознавание тем (по паттерну "Тема N")
- Группировка текста по темам
- Удаление дубликатов
- Генерация `lectures.generated.js` с данными лекций

**Алгоритм работы:**
1. Загрузка данных из `data.js` для определения дисциплин
2. Построение карты дисциплин по нормализованным названиям
3. Построчный анализ текста
4. Определение начала новой дисциплины или темы
5. Сбор текста темы
6. Дедупликация лекций
7. Генерация выходного файла

---

### 8. **disciplines.ts** - TypeScript интерфейсы

**Назначение:** Определяет типы данных для дисциплин, презентаций и слайдов.

**Интерфейсы:**
- `Slide` - Структура слайда
- `Presentation` - Структура презентации
- `Discipline` - Структура дисциплины

**Использование:** Для типизации данных и проверки структуры.

---

## Поток работы приложения

### 1. Инициализация
```
1. Загрузка HTML (index.html)
2. Загрузка CSS (styles.css)
3. Загрузка JavaScript файлов:
   - data.js (данные дисциплин)
   - lectures.js (данные лекций)
   - pptx-export.js (экспорт)
   - app.js (логика)
4. Выполнение DOMContentLoaded:
   - renderDisciplines()
   - setupKeyboardNavigation()
   - setupScrollAnimations()
```

### 2. Навигация пользователя

**Путь 1: Просмотр презентаций**
```
Главная → Дисциплины → Категория → Дисциплина → Презентация → Просмотр
```

**Путь 2: Просмотр лекций**
```
Главная → Дисциплины → Категория → Дисциплина → Лекции → Просмотр
```

### 3. Просмотр презентации

**Процесс:**
1. Пользователь выбирает презентацию
2. `openPresentation()` вызывается с индексом
3. `renderSlides()` создает DOM-элементы для всех слайдов
4. `renderThumbnails()` создает миниатюры
5. Показывается первый слайд
6. Пользователь может:
   - Переключать слайды (кнопки, клавиатура, свайпы)
   - Переходить к слайду по миниатюре
   - Включить полноэкранный режим
   - Экспортировать в PPTX

### 4. Просмотр лекции

**Процесс:**
1. Пользователь выбирает лекцию
2. `openLecture()` вызывается с ID лекции
3. HTML-контент лекции вставляется в контейнер
4. Скрываются элементы управления слайдами
5. Отображается полный текст лекции

---

## Клавиатурные сокращения

- **Стрелка вправо / Space / Enter** - Следующий слайд
- **Стрелка влево / Backspace** - Предыдущий слайд
- **F** - Полноэкранный режим
- **Escape** - Выход из полноэкранного режима
- **Home** - Первый слайд
- **End** - Последний слайд

---

## Адаптивность

**Мобильные устройства:**
- Свайпы для переключения слайдов
- Адаптивная сетка карточек
- Упрощенная навигация
- Оптимизированные размеры шрифтов

**Планшеты:**
- Промежуточные размеры элементов
- Адаптивная сетка

**Десктоп:**
- Полнофункциональный интерфейс
- Все анимации и эффекты

---

## Особенности реализации

### 1. Система категорий
- Две категории: "Презентации через код" и "Презентации из PPTX"
- Категория PPTX пока в разработке

### 2. Переключатель представлений
- В дисциплине с лекциями появляется переключатель
- Можно выбрать между презентациями и лекциями

### 3. Градиенты слайдов
- 8 различных градиентов
- Циклическое применение к слайдам
- Сохранение при экспорте в PPTX

### 4. Анимации
- Плавные переходы между слайдами
- Появление элементов с задержкой
- Декоративные элементы на слайдах

### 5. Нормализация текста
- Функция `normalizeSlideText()` заменяет "?" на "• "
- Обеспечивает единообразное форматирование

---

## Зависимости

**Внешние библиотеки:**
- Font Awesome 6.4.0 (CDN)
- Google Fonts - Inter (CDN)
- PptxGenJS 3.12.0 (CDN)

**Встроенные API:**
- Fullscreen API (для полноэкранного режима)
- Intersection Observer API (для анимаций при скролле)
- Touch Events API (для свайпов)

---

## Будущие возможности

**В разработке:**
- Раздел тестирования
- Загрузка PPTX презентаций
- Дополнительные функции для лекций

---

## Технические детали

**Размеры файлов:**
- `data.js` - ~18,000 строк (очень большой)
- `lectures.js` - ~18,000 строк (очень большой)
- `app.js` - ~700 строк
- `styles.css` - ~1,700 строк
- `pptx-export.js` - ~580 строк

**Производительность:**
- Ленивая загрузка слайдов (все создаются сразу, но показывается только активный)
- Оптимизированные CSS-анимации
- Минимальное количество DOM-манипуляций

---

## Заключение

Программа представляет собой полнофункциональный образовательный портал для просмотра презентаций и лекций. Она использует современные веб-технологии, имеет интуитивный интерфейс и поддерживает различные типы контента. Архитектура позволяет легко добавлять новые дисциплины, презентации и функциональность.

